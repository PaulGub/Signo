<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Générateur de signature</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .container {
      display: flex;
      gap: 2rem;
    }
    form {
      width: 300px;
      display: flex;
      flex-direction: column;
    }
    label {
      margin-bottom: 5px;
      font-weight: bold;
    }
    input, select, button {
      margin-bottom: 10px;
      padding: 8px;
      font-size: 14px;
    }
    .signature-preview {
      flex: 1;
      border: 1px solid #ccc;
      padding: 10px;
      min-width: 400px;
    }
    h2 {
      margin-top: 0;
    }
    .copy-btn {
      background-color: #007BFF;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 16px;
      padding: 10px 15px;
      border-radius: 5px;
      margin-bottom: 20px;
    }
    .copy-btn:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <h1>Générateur de signature</h1>

  <div class="container">
    <!-- FORMULAIRE -->
    <form id="signatureForm">

      <!-- Nom et Prénom -->
      <label for="nom">Nom et Prénom</label>
      <input type="text" id="nom" placeholder="Ex : Paul Gubbiotti" required />

      <!-- Poste -->
      <label for="poste">Poste / Titre</label>
      <input type="text" id="poste" placeholder="Ex : Assistant Marketing" />

      <!-- Service -->
      <label for="service">Service</label>
      <input type="text" id="service" placeholder="Ex : Marketing, Commercial..." />

      <!-- Téléphone fixe -->
      <label for="telFixe">Téléphone fixe</label>
      <input type="tel" id="telFixe" placeholder="05 57 92 18 28" />

      <!-- Téléphone portable -->
      <label for="telPortable">Téléphone mobile</label>
      <input type="tel" id="telPortable" placeholder="07 68 50 44 14" />

      <!-- Email -->
      <label for="mail">Email</label>
      <input type="email" id="mail" placeholder="exemple@bacqueyrisses.fr" />

      <!-- Filiale -->
      <label for="filiale">Filiale</label>
      <select id="filiale">
        <option value="bacqueyrisses" selected>Bacqueyrisses</option>
        <option value="pbc">PBC</option>
        <option value="boxtore">Boxtore</option>
        <option value="skillbus">Skillbus</option>
        <option value="sellerie">Sellerie</option>
      </select>

      <!-- URL de la photo -->
      <label for="photoURL">Photo (URL)</label>
      <input type="text" id="photoURL" placeholder="https://..." />

      <button type="button" id="genererBtn">Générer</button>
    </form>

    <!-- APERÇU DE LA SIGNATURE / RENDU HTML -->
    <div class="signature-preview">
      <button class="copy-btn" id="copyBtn">Copier le code HTML</button>
      <div id="previewArea">
        <!-- La signature générée s'affiche ici (rendu HTML) -->
      </div>
    </div>
  </div>

  <script>
    /**
     * Données par filiale :
     * - Couleur (color)
     * - Site web (website)
     * - Image de signature (signatureImage)
     * - Adresse postale (address)
     * - Lien Google Maps (addressMapURL)
     * - Réseaux sociaux distincts (socialLinks)
     */
    const filialeData = {
      bacqueyrisses: {
        color: '#002D72', 
        website: 'https://www.bacqueyrisses.fr/',
        signatureImage: 'https://raw.githubusercontent.com/PaulGub/signature-bacqueyrisses/refs/heads/main/image-signature.gif',
        address: '2 rue de Fieuzal, 33520 Bruges',
        addressMapURL: 'https://maps.app.goo.gl/XUoCEJyei1q17QUk6',
        socialLinks: {
          linkedin: 'https://www.linkedin.com/company/bacqueyrisses-sa/',
          instagram: 'https://www.instagram.com/bacqueyrisses_groupe/',
          facebook: 'https://www.facebook.com/profile.php?id=100065168555655',
          youtube: 'https://www.youtube.com/@groupe-bacqueyrisses'
        }
      },
      pbc: {
        color: '#87CEEB', // Bleu ciel
        website: 'https://www.pbc-exemple.fr/', // Remplace par la vraie URL si besoin
        signatureImage: 'https://via.placeholder.com/500x100/87CEEB/fff?text=Signature+PBC',
        address: '123 Avenue PBC, 33000 Bordeaux', // Ex. fictif
        addressMapURL: 'https://maps.google.com/?q=123+avenue+pbc+bordeaux',
        socialLinks: {
          linkedin: 'https://www.linkedin.com/company/pbc/',
          instagram: 'https://www.instagram.com/pbc/',
          facebook: 'https://www.facebook.com/pbc',
          youtube: 'https://www.youtube.com/@pbc'
        }
      },
      boxtore: {
        color: '#008000', // Vert
        website: 'https://boxtore.fr/',
        signatureImage: 'https://via.placeholder.com/500x100/008000/fff?text=Signature+Boxtore',
        address: 'Adresse Boxtore, 99999 Ville', // À personnaliser
        addressMapURL: 'https://maps.google.com/?q=Adresse+Boxtore',
        socialLinks: {
          linkedin: 'https://www.linkedin.com/company/boxtore/',
          instagram: 'https://www.instagram.com/boxtore/',
          facebook: 'https://www.facebook.com/boxtore',
          youtube: 'https://www.youtube.com/@boxtore'
        }
      },
      skillbus: {
        color: '#FFA500', // Orange
        website: 'https://www.skillbus.fr/',
        signatureImage: 'https://via.placeholder.com/500x100/FFA500/fff?text=Signature+Skillbus',
        address: 'Adresse Skillbus, 88888 Ville', // À personnaliser
        addressMapURL: 'https://maps.google.com/?q=Adresse+Skillbus',
        socialLinks: {
          linkedin: 'https://www.linkedin.com/company/skillbus/',
          instagram: 'https://www.instagram.com/skillbus/',
          facebook: 'https://www.facebook.com/skillbus',
          youtube: 'https://www.youtube.com/@skillbus'
        }
      },
      sellerie: {
        color: '#FF0000', // Rouge
        website: 'https://www.sellerie-bacqueyrisses.fr/',
        signatureImage: 'https://via.placeholder.com/500x100/FF0000/fff?text=Signature+Sellerie',
        address: 'Adresse Sellerie, 77777 Ville', // À personnaliser
        addressMapURL: 'https://maps.google.com/?q=Adresse+Sellerie',
        socialLinks: {
          linkedin: 'https://www.linkedin.com/company/sellerie/',
          instagram: 'https://www.instagram.com/sellerie/',
          facebook: 'https://www.facebook.com/sellerie',
          youtube: 'https://www.youtube.com/@sellerie'
        }
      }
    };

    // Récupération des éléments du DOM
    const form = document.getElementById('signatureForm');
    const nomInput = document.getElementById('nom');
    const posteInput = document.getElementById('poste');
    const serviceInput = document.getElementById('service');
    const telFixeInput = document.getElementById('telFixe');
    const telPortableInput = document.getElementById('telPortable');
    const mailInput = document.getElementById('mail');
    const filialeSelect = document.getElementById('filiale');
    const photoURLInput = document.getElementById('photoURL');

    const previewArea = document.getElementById('previewArea');
    const copyBtn = document.getElementById('copyBtn');
    const genererBtn = document.getElementById('genererBtn');

    // Génère le code HTML de la signature
    function generateSignatureHTML() {
      // Valeurs des champs
      const nom = nomInput.value.trim() || 'NOM Prénom';
      const poste = posteInput.value.trim() || 'Poste';
      const service = serviceInput.value.trim() || ''; // Optionnel
      const telFixe = telFixeInput.value.trim();
      const telPortable = telPortableInput.value.trim();
      const mail = mailInput.value.trim() || 'exemple@mail.com';
      const filiale = filialeSelect.value;
      const photoURL = photoURLInput.value.trim();

      // Si aucune photo n'est fournie, on peut utiliser un avatar par défaut
      const defaultPhoto = 'https://via.placeholder.com/50x50?text=Photo'; 
      const finalPhotoURL = photoURL || defaultPhoto; 

      // Récupération des paramètres de la filiale
      const {
        color,
        website,
        signatureImage,
        address,
        addressMapURL,
        socialLinks
      } = filialeData[filiale];

      // Construction du code HTML
      // On insère les liens réseaux sociaux de la filiale choisie
      const signatureHTML = `
<html xmlns:o="urn:schemas-microsoft-com:office:office" 
      xmlns:w="urn:schemas-microsoft-com:office:word" 
      xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" 
      xmlns="http://www.w3.org/TR/REC-html40">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
  <table style="max-width: 600px; font-family: Arial, sans-serif; line-height: 1.5; width: 100%;">
    <tr>
      <td>
        <!-- NOM / POSTE / SERVICE -->
        <table style="width: 100%; display: flex; align-items: center;">
          <tr>
            <td style="padding-right: 10px;">
              <!-- Photo de profil (dynamique) -->
              <img
                src="${finalPhotoURL}"
                alt="Photo de profil" 
                width="50" 
                height="50"
                style="border: 2px solid ${color}; border-radius: 50%;">
            </td>
            <td>
              <span style="font-size: 20px; font-weight: bold; text-transform: uppercase; color: ${color};">
                ${nom}
              </span><br>
              <span style="font-size: 18px; font-style: italic;">
                ${poste}${service ? ' - ' + service : ''}
              </span>
            </td>
          </tr>
        </table>

        <!-- Téléphone fixe (optionnel) -->
        ${
          telFixe
            ? `
        <p style="font-size: 14px; margin: 5px 0;">
          <table style="display: inline-table; vertical-align: middle;">
            <tr>
              <td style="padding-right: 5px;">
                <a href="tel:+33${telFixe.replace(/\s/g, '')}" target="_blank" style="color: #000; text-decoration: none;">
                  <img src="https://raw.githubusercontent.com/PaulGub/signature-bacqueyrisses/refs/heads/main/icon-phone-fixe.png" alt="Téléphone fixe" width="25" height="25">
                </a>
              </td>
              <td>
                <a href="tel:+33${telFixe.replace(/\s/g, '')}" target="_blank" style="color: #000; text-decoration: none;">
                  ${telFixe}
                </a>
              </td>
            </tr>
          </table>
        </p>
        `
            : ''
        }

        <!-- Téléphone portable (optionnel) -->
        ${
          telPortable
            ? `
        <p style="font-size: 14px; margin: 5px 0;">
          <table style="display: inline-table; vertical-align: middle;">
            <tr>
              <td style="padding-right: 5px;">
                <a href="tel:+33${telPortable.replace(/\s/g, '')}" target="_blank" style="color: #000; text-decoration: none;">
                  <img src="https://raw.githubusercontent.com/PaulGub/signature-bacqueyrisses/refs/heads/main/icon-phone-mobile.png" alt="Téléphone mobile" width="25" height="25">
                </a>
              </td>
              <td>
                <a href="tel:+33${telPortable.replace(/\s/g, '')}" target="_blank" style="color: #000; text-decoration: none;">
                  ${telPortable}
                </a>
              </td>
            </tr>
          </table>
        </p>
        `
            : ''
        }

        <!-- Email -->
        <p style="font-size: 14px; margin: 5px 0;">
          <table style="display: inline-table; vertical-align: middle;">
            <tr>
              <td style="padding-right: 5px;">
                <a href="mailto:${mail}" target="_blank" style="color: #000000; text-decoration: none;">
                  <img src="https://raw.githubusercontent.com/PaulGub/signature-bacqueyrisses/refs/heads/main/icon-email.png" alt="Email" width="25" height="25">
                </a>
              </td>
              <td>
                <a href="mailto:${mail}" target="_blank" style="color: #000000; text-decoration: none;">
                  ${mail}
                </a>
              </td>
            </tr>
          </table>
        </p>

        <!-- Adresse (dynamique en fonction de la filiale) -->
        <p style="font-size: 14px; margin: 5px 0;">
          <table style="display: inline-table; vertical-align: middle;">
            <tr>
              <td style="padding-right: 5px;">
                <a href="${addressMapURL}" target="_blank" style="color: #000000; text-decoration: none;">
                  <img src="https://raw.githubusercontent.com/PaulGub/signature-bacqueyrisses/refs/heads/main/icon-map.png" alt="Adresse" width="25" height="25">
                </a>
              </td>
              <td>
                <a href="${addressMapURL}" target="_blank" style="color: #000000; text-decoration: none;">
                  ${address}
                </a>
              </td>
            </tr>
          </table>
        </p>
        
        <!-- Lien du site (selon la filiale) -->
        <a href="${website}" target="_blank" style="font-size: 14px; font-weight: bold; text-decoration: none; color: inherit;">
          ${website.replace(/^https?:\/\//, '')}
        </a>

        <!-- Icônes de réseaux sociaux distincts pour chaque filiale -->
        <div style="margin-top: 10px;">
          ${
            socialLinks.linkedin
              ? `<a href="${socialLinks.linkedin}" target="_blank" style="text-decoration: none; margin-right: 5px;">
                  <img src="https://raw.githubusercontent.com/PaulGub/signature-bacqueyrisses/refs/heads/main/icon-linkedin.png" 
                       alt="LinkedIn" 
                       width="35" 
                       height="35" 
                       style="vertical-align: middle;">
                </a>`
              : ''
          }
          ${
            socialLinks.instagram
              ? `<a href="${socialLinks.instagram}" target="_blank" style="text-decoration: none; margin-right: 5px;">
                  <img src="https://raw.githubusercontent.com/PaulGub/signature-bacqueyrisses/refs/heads/main/icon-instagram.png" 
                       alt="Instagram" 
                       width="35" 
                       height="35" 
                       style="vertical-align: middle;">
                </a>`
              : ''
          }
          ${
            socialLinks.facebook
              ? `<a href="${socialLinks.facebook}" target="_blank" style="text-decoration: none; margin-right: 5px;">
                  <img src="https://raw.githubusercontent.com/PaulGub/signature-bacqueyrisses/refs/heads/main/icon-facebook.png" 
                       alt="Facebook" 
                       width="35" 
                       height="35" 
                       style="vertical-align: middle;">
                </a>`
              : ''
          }
          ${
            socialLinks.youtube
              ? `<a href="${socialLinks.youtube}" target="_blank" style="text-decoration: none;">
                  <img src="https://raw.githubusercontent.com/PaulGub/signature-bacqueyrisses/refs/heads/main/icon-youtube.png" 
                       alt="YouTube" 
                       width="35" 
                       height="35" 
                       style="vertical-align: middle;">
                </a>`
              : ''
          }
        </div>

        <!-- Image de signature / Bannière (selon la filiale) -->
        <p style="margin-top: 20px;">
          <a href="${website}" target="_blank" style="border: none; text-decoration: none;">
            <img 
              src="${signatureImage}" 
              alt="Signature image" 
              width="500" 
              style="border: none;">
          </a>
        </p>

        <!-- Mentions légales -->
        <div style="max-width: 600px;">
          <p style="font-size: 12px; color: ${color}; margin-top: 20px; line-height: 1.6;">
            <img src="https://raw.githubusercontent.com/PaulGub/signature-bacqueyrisses/refs/heads/main/logo-afaq.jpg" 
                 alt="Certification AFAQ" 
                 style="width: 25px; height: 25px; vertical-align: middle; margin-right: 5px;">
            Notre organisme est certifié AFAQ ISO 9001.
          </p>
          <p style="font-size: 12px; color: red; margin-top: 20px; line-height: 1.6;">
            Afin de respecter votre droit à la déconnexion, vous ne devez pas répondre à ce message en dehors de vos horaires de travail ou pendant vos congés, 
            sauf si le sujet représente un caractère de gravité et/ou d'urgence.
          </p>
          <p style="font-size: 12px; color: black; line-height: 1.6;">
            Les informations contenues dans ce courrier électronique sont confidentielles et protégées par le secret professionnel. 
            Elles ne sont destinées qu'à la personne ou entreprise mentionnée ci-dessus. Veuillez aviser l'expéditeur en cas d'erreur. 
            Si vous n'êtes pas le destinataire, vous n'êtes pas autorisé à copier, divulguer ou diffuser ce document.
          </p>
          <p style="font-size: 12px; color: green; line-height: 1.6;">
            &#127793; Afin de contribuer au respect de l'environnement, merci de n'imprimer ce courriel qu'en cas de nécessité.
          </p>
        </div>
      </td>
    </tr>
  </table>
</body>
</html>
      `;

      return signatureHTML;
    }

    // Quand on clique sur "Générer", on affiche la signature en HTML dans l'aperçu
    genererBtn.addEventListener('click', () => {
      const html = generateSignatureHTML();
      previewArea.innerHTML = html; // Affiche le rendu HTML dans l'aperçu
    });

    // Quand on clique sur "Copier le code HTML", on copie le code dans le presse-papiers
    copyBtn.addEventListener('click', () => {
      const html = generateSignatureHTML();
      const tempTextarea = document.createElement('textarea');
      tempTextarea.value = html;
      document.body.appendChild(tempTextarea);
      tempTextarea.select();
      document.execCommand('copy');
      document.body.removeChild(tempTextarea);
      alert('Code HTML copié dans le presse-papiers !');
    });
  </script>
</body>
</html>
